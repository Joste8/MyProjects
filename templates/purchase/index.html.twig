<div class="card bg-dark text-white p-4">
    <h2>Product & Stock List</h2>
    <table class="table table-dark table-hover">
        <thead>
            <tr>
                <th>ID</th><th>Name</th><th>Attributes / Variants (Current Stock)</th>
            </tr>
        </thead>
        <tbody>
            {% for product in products %}
            <tr>
                <td>{{ product.id }}</td>
                <td>{{ product.name }}</td>
                <td>
                    {% for variant in product.variants %}
                        <span class="badge bg-primary">
                            {{ variant.color }} | {{ variant.size }} (Qty: {{ variant.quantity }})
                        </span>
                    {% endfor %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <hr>

    <h3>Add New Purchase</h3>
    <form action="{{ path('admin_purchase_add') }}" method="POST" class="row g-3">
        <div class="col-md-4">
            <input type="text" name="customer_name" class="form-control" placeholder="Customer Name" required>
        </div>
        <div class="col-md-4">
            <select name="variant_id" class="form-select" required>
                <option value="">Select Product & Variant</option>
                {% for product in products %}
                    {% for variant in product.variants %}
                        <option value="{{ variant.id }}">{{ product.name }} - {{ variant.color }} ({{ variant.quantity }} left)</option>
                    {% endfor %}
                {% endfor %}
            </select>
        </div>
        <div class="col-md-2">
            <input type="number" name="quantity" class="form-control" placeholder="Qty" required>
        </div>
        <div class="col-md-2">
            <button type="submit" class="btn btn-info">Complete Purchase</button>
        </div>
    </form>

    <hr>

    <h3>Purchase History Log</h3>
    <table class="table table-dark table-striped">
        <thead>
            <tr>
                <th>Customer Name</th><th>Product</th><th>Variant</th><th>Quantity</th><th>Date</th>
            </tr>
        </thead>
        <tbody>
            {% for log in purchases %}
            <tr>
                <td>{{ log.customerName }}</td>
                <td>{{ log.productName }}</td>
                <td>{{ log.variantDetails }}</td>
                <td>{{ log.quantity }}</td>
                <td>{{ log.createdAt|date('d-M-Y H:i') }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
