<!DOCTYPE html>
<html>
<head>
    <style>
        body { font-family: 'DejaVu Sans', sans-serif; font-size: 12px; color: #333; }
        .header { text-align: center; border-bottom: 2px solid #444; padding-bottom: 10px; }
        .section-title { background: #f4f4f4; padding: 5px; font-weight: bold; margin-top: 20px; }
        table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
        th { background: #eee; }
        .total { font-weight: bold; text-align: right; margin-top: 10px; font-size: 14px; }
    </style>
</head>
<body>
    <div class="header">
        <h2>CUSTOMER PURCHASE REPORT</h2>
    </div>

    <div class="section-title">Customer Details</div>
    <p><strong>Name:</strong> {{ customer.name }}</p>
    <p><strong>Email:</strong> {{ customer.email }}</p>
    <p><strong>Phone:</strong> {{ customer.phone }}</p>
    <p><strong>Address:</strong> {{ customer.address }}</p>

    <div class="section-title">Purchase History</div>
    <table>
        <thead>
            <tr>
                <th>Product Name</th>
                <th>Qty</th>
                <th>Price</th>
                <th>Total</th>
            </tr>
        </thead>
       <tbody>
    {% for purchase in customer.purchases %}
        <tr>
    
            <td>{{ purchase.itemName }}</td> 

            <td>{{ purchase.quantity }}</td>

            <td>₹{{ purchase.price|number_format(2) }}</td>

            <td>₹{{ purchase.totalPrice|number_format(2) }}</td>
        </tr>
    {% endfor %}
</tbody>
    </table>

    <div class="total">
        Overall Spent: ₹{{ customer.grandTotal|number_format(2) }}
    </div>
</body>
</html>